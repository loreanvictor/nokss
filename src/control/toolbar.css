:root {
  --toolbar-spacer-gap: calc(var(--spacing) * 4);
  --toolbar-spacer-margin: calc(var(--spacing) / 2);
  --toolbar-spacer-thickness: var(--hr-thickness);
  --toolbar-spacer-expression: var(--hr-expression);
}

[role="toolbar"], [role="tablist"], [role="radiogroup"] {
  margin: 0;
  display: flex;
  gap: 0px;
  max-width: 100%;
  overflow: auto;

  &[align="right"],
  &[align="bottom"] {
    justify-content: flex-end;
  }
}

[role="toolbar"]>:is(button, [role="button"], [type="button"], [type="sumbit"]),
[role="tablist"]>:is(button, [role="tab"]),
[role="radiogroup"]>:is(button, [role="radio"]) {
  background: var(--background-color);
  color: var(--text-color);
  filter: brightness(var(--interactable-brightness));

  @media (hover: none) {
    transition: none;
  }

  &:before {
    border-color: var(--text-color);
    opacity: var(--border-expression);
  }

  &:is([aria-description^="danger"], [aria-description^="Danger"]) {
    color: var(--danger-color);
  }

  &:hover,
  &:focus {
    filter: brightness(var(--hover-brightness));
  }
}

[role="toolbar"]>:is(button, [role="button"], [type="button"], [type="sumbit"]):active {
  opacity: var(--button-secondary-active-opacity);
}

[role="tablist"]>:is(button, [role="tab"]):is(:active, [aria-selected="true"]),
[role="radiogroup"]>:is(button, [role="radio"]):is(:active, [aria-checked="true"]) {
  background: var(--primary-color);
  color: var(--primary-text-color);
  filter: none;
  transition: none;

  &:before {
    border-color: var(--primary-color);
    filter: brightness(var(--button-primary-border-brightness));
    transition: none;
  }
}

:is([role="toolbar"], [role="radiogroup"])>hr {
  display: inline-block;
  width: var(--toolbar-spacer-thickness);
  min-width: var(--toolbar-spacer-thickness);
  height: calc(var(--button-height) - var(--toolbar-spacer-margin) * 2);
  vertical-align: middle;
  margin: var(--toolbar-spacer-margin) calc((var(--toolbar-spacer-gap) - var(--toolbar-spacer-thickness)) / 2);
  margin-top: var(--toolbar-spacer-margin);
  border: none;
  background: var(--text-color);
  opacity: var(--toolbar-spacer-expression);
}

[role="toolbar"]:not([aria-orientation="vertical"])>:is(button, [role="button"], [type="button"], [type="sumbit"]),
[role="tablist"]>:is(button, [role="tab"]),
[role="radiogroup"]:not([aria-orientation="vertical"])>:is(button, [role="radio"]) {
  &:not(:first-child, :last-child) {
    border-radius: 0;
    &:before {
      border-radius: 0;
      border-left: none;
    }
  }

  &:first-child:not(:last-child) {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;

    &:before {
      border-top-right-radius: 0;
      border-bottom-right-radius: 0;
    }
  }

  &:last-child:not(:first-child) {
    border-left: none;
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;

    &:before {
      border-left: none;
      border-top-left-radius: 0;
      border-bottom-left-radius: 0;
    }
  }
}

:is([role="toolbar"], [role="radiogroup"])[aria-orientation="vertical"] {
  display: inline-flex;
  flex-shrink: 0;
  flex-direction: column;
  gap: 0px;
  width: var(--button-height);

  &>hr {
    width: calc(var(--button-height) - var(--toolbar-spacer-margin) * 2);
    height: var(--toolbar-spacer-thickness);
    margin: calc((var(--toolbar-spacer-gap) - var(--toolbar-spacer-thickness)) / 2) var(--toolbar-spacer-margin);
  }
}

[role="toolbar"][aria-orientation="vertical"]>:is(button, [role="button"], [type="button"], [type="sumbit"]),
[role="radiogroup"][aria-orientation="vertical"]>:is(button, [role="radio"]) {
  &:not(:first-child, :last-child) {
    border-radius: 0;
    &:before {
      border-radius: 0;
      border-top: none;
    }
  }

  &:first-child:not(:last-child) {
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;

    &:before {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;
    }
  }

  &:last-child:not(:first-child) {
    border-top: none;
    border-top-left-radius: 0;
    border-top-right-radius: 0;

    &:before {
      border-top: none;
      border-top-left-radius: 0;
      border-top-right-radius: 0;
    }
  }
}

:is([role="toolbar"], [role="radiogroup"], [role="tablist"])
:is([role="toolbar"], [role="radiogroup"], [role="tablist"]) {
  overflow: unset;
}
